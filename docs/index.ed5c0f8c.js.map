{"mappings":"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","sources":["src/script/modules/dbHandling.mjs","src/script/main.js"],"sourcesContent":["const src = \"https://character-database.becode.xyz/characters\";\n\nconst getData = async () => {\n    const data = await fetch(src);\n    return await data.json();\n}\n\nconst manageChar = async (charObj, method) => {\n    let source;\n    let deleteSource = src.concat('/', charObj);\n    let options;\n\n    if (method === \"DELETE\") {\n        source = deleteSource;\n        options = {method: method};\n    } else {\n        source = src;\n        options = {\n            method: method,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(charObj)\n        }\n    }\n    let response = await fetch(source, options);\n    let data = await response;\n    console.log(data);\n    window.location.reload();\n}\n\nexport { getData, manageChar };","import * as dbHandling from './modules/dbHandling.mjs';\nconst showdown = window.showdown;\nconst converter = new showdown.Converter();\nconst app = async () => {\n\n    const moreDetailsModal = document.querySelector('#moreInfoModal');\n    const database = await dbHandling.getData();\n    const modifyingModal = document.querySelector('#editingModal');\n\n    // DISPLAYING DATABASE WITH TEMPLATES ONTO DOM\n    for(let item of database) {\n        let tpl = document.querySelector('#tpl');\n        let clone = document.importNode(tpl.content, true);\n        clone.querySelector('h2').textContent = item.name;\n        clone.querySelector('p').textContent = item.shortDescription;\n        clone.querySelector('img').src = `data:image;base64,${item.image}`;\n        clone.querySelector('button').id = item.id;\n        document.querySelector('#cardContainer').appendChild(clone);\n    }\n    // FUNCTION TO GET THE SPECIFIC ITEM FROM THE DATABASE\n    const getSpecificPost = (id) => {\n        let match;\n        for(let item of database) {\n            if (item.id === id) {\n                match = item;\n            }\n        }\n        return match;\n    }\n    // ADDING THE EVENT LISTENERS ON THE VIEW MORE BUTTONS\n    for (let item of document.querySelectorAll('.viewMore')) {\n        item.addEventListener('click', () => {\n            let id = item.id;\n            let dbEntry = getSpecificPost(id);\n            moreDetailsModal.children[0].id = id;\n            moreDetailsModal.querySelector('.titleName').textContent = dbEntry.name;\n            moreDetailsModal.querySelector('#detailsName').textContent = dbEntry.name;\n            moreDetailsModal.querySelector('#detailsShortDescription').textContent = dbEntry.shortDescription;\n            moreDetailsModal.querySelector('#detailsLongDescription').innerHTML = dbEntry.description;\n            moreDetailsModal.querySelector('#detailsPicture').src = `data:image;base64,${dbEntry.image}`;\n        })\n    }\n    // INITIALIZING THE MARKDOWN EDITOR\n    const easyMDE = new EasyMDE({\n        toolbar: [\n            {\n                name: \"bold\",\n                action: EasyMDE.toggleBold,\n                className: \"fa fa-bold\",\n                title: \"Bold\",\n            },\n            {\n                name: \"italics\",\n                action: EasyMDE.toggleItalic,\n                className: \"fa fa-italic\",\n                title: \"Italic\"\n            },\n            {\n                name: \"heading\",\n                action: EasyMDE.toggleHeadingSmaller,\n                className: \"fa fa-header\",\n                title: \"Heading\"\n            },\n            \"|\", // Separator\n            {\n                name: \"quote\",\n                action: EasyMDE.toggleBlockquote,\n                className: \"fa fa-quote-left\",\n                title: \"Quote\"\n            },\n            {\n                name: \"unordered-list\",\n                action: EasyMDE.toggleUnorderedList,\n                className: \"fa fa-list-ul\",\n                title: \"Unordered List\"\n            },\n            {\n                name: \"ordered-list\",\n                action: EasyMDE.toggleOrderedList,\n                className: \"fa fa-list-ol\",\n                title: \"Ordered List\"\n            },\n            {\n                name: \"table\",\n                action: EasyMDE.drawTable,\n                className: \"fa fa-table\",\n                title: \"Table\"\n            },\n            \"|\",\n            {\n                name: \"guide\",\n                action: \"https://www.markdownguide.org/basic-syntax/\",\n                className: \"fa fa-question-circle\",\n                title: \"Guide\"\n            }\n            // [, ...]\n        ],\n        element: document.getElementById('longDescriptionInput')\n    });\n    const modifyingMDE = new EasyMDE({\n        toolbar: [\n            {\n                name: \"bold\",\n                action: EasyMDE.toggleBold,\n                className: \"fa fa-bold\",\n                title: \"Bold\",\n            },\n            {\n                name: \"italics\",\n                action: EasyMDE.toggleItalic,\n                className: \"fa fa-italic\",\n                title: \"Italic\"\n            },\n            {\n                name: \"heading\",\n                action: EasyMDE.toggleHeadingSmaller,\n                className: \"fa fa-header\",\n                title: \"Heading\"\n            },\n            \"|\", // Separator\n            {\n                name: \"quote\",\n                action: EasyMDE.toggleBlockquote,\n                className: \"fa fa-quote-left\",\n                title: \"Quote\"\n            },\n            {\n                name: \"unordered-list\",\n                action: EasyMDE.toggleUnorderedList,\n                className: \"fa fa-list-ul\",\n                title: \"Unordered List\"\n            },\n            {\n                name: \"ordered-list\",\n                action: EasyMDE.toggleOrderedList,\n                className: \"fa fa-list-ol\",\n                title: \"Ordered List\"\n            },\n            {\n                name: \"table\",\n                action: EasyMDE.drawTable,\n                className: \"fa fa-table\",\n                title: \"Table\"\n            },\n            \"|\",\n            {\n                name: \"guide\",\n                action: \"https://www.markdownguide.org/basic-syntax/\",\n                className: \"fa fa-question-circle\",\n                title: \"Guide\"\n            }\n            // [, ...]\n        ],\n        element: document.getElementById('modifyingLongDescription')\n    });\n    // EVENT LISTENER TO CHECK IF USER ADDS IMAGE TO NEW CHARACTER MENU\n    let imgInput = document.querySelector('#imageInput');\n    imgInput.addEventListener('change', function (e) {\n        if (e.target.files) {\n            let imageFile = e.target.files[0];\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                var img = document.createElement(\"img\");\n                img.onload = function (event) {\n                    // Dynamically create a canvas element\n                    var canvas = document.createElement(\"canvas\");\n                    canvas.width = 100;\n                    canvas.height = 100;\n                    // var canvas = document.getElementById(\"canvas\");\n                    var ctx = canvas.getContext(\"2d\");\n                    // Actual resizing\n                    ctx.drawImage(img, 0, 0, 100, 100);\n                    // Show resized image in preview element\n                    var dataurl = canvas.toDataURL(\"image/jpg\", 0.7);\n                    document.getElementById(\"preview\").src = dataurl;\n                }\n                img.src = e.target.result;\n            }\n            reader.readAsDataURL(imageFile);\n            \n        }\n    });\n\n    // HANDLING THE CLICK ON SUBMIT NEW CHAR\n    document.querySelector('#submitNewChar').addEventListener('click', () => {\n        let newChar = {};\n        newChar.name = document.querySelector('#nameInput').value;\n        newChar.shortDescription = document.querySelector('#shortDescriptionInput').value;\n        let mdText = easyMDE.value();\n        let htmlText = converter.makeHtml(mdText)\n        newChar.description = htmlText;\n\n        let newSrc = document.querySelector('#preview').src;\n        newChar.image = newSrc.slice(22, newSrc.length);\n        dbHandling.manageChar(newChar, 'POST');\n    });\n    // HANDLING THE DELETE BUTTON ON CHAR DELETION\n    document.querySelector('#deleteCharBtn').addEventListener('click', () => {\n        let id = moreDetailsModal.children[0].id;\n        dbHandling.manageChar(id, 'DELETE');\n    })\n\n    document.querySelector('#editBtn').addEventListener('click', () => {\n        console.log(\"sending modified\");\n        let id = moreDetailsModal.children[0].id;\n        let dbEntry = getSpecificPost(id);\n        modifyingModal.querySelector('#modifyingNameTitle').textContent = dbEntry.name;\n        modifyingModal.querySelector('#modifyingName').value = dbEntry.name;\n        modifyingModal.querySelector('#modifyingShortDescription').value = dbEntry.shortDescription;\n        modifyingMDE.value(converter.makeMarkdown(dbEntry.description));\n        //modifyingMDE.cm.refresh();\n        modifyingModal.querySelector('#modifyingPreview').src = `data:image;base64,${dbEntry.image}`;\n    });\n}    \napp();"],"names":["$62bab0894ad7c0f6$export$35175092c898c4da","async","charObj","method","source","options","deleteSource","concat","headers","body","JSON","stringify","response","fetch","data","console","log","window","location","reload","$bd71841cf23a3750$var$converter","showdown","Converter","moreDetailsModal","document","querySelector","database","json","$62bab0894ad7c0f6$export$7a171f172be0782e","modifyingModal","item","tpl","clone","importNode","content","textContent","name","shortDescription","src","image","id","appendChild","getSpecificPost","match","item1","querySelectorAll","addEventListener","dbEntry","children","innerHTML","description","easyMDE","EasyMDE","toolbar","action","toggleBold","className","title","toggleItalic","toggleHeadingSmaller","toggleBlockquote","toggleUnorderedList","toggleOrderedList","drawTable","element","getElementById","modifyingMDE","e","target","files","imageFile","reader","FileReader","onload","img","createElement","event","canvas","width","height","getContext","drawImage","dataurl","toDataURL","result","readAsDataURL","newChar","value","mdText","htmlText","makeHtml","newSrc","slice","length","makeMarkdown","$bd71841cf23a3750$var$app"],"version":3,"file":"index.ed5c0f8c.js.map"}