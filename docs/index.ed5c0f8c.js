const e=async(e,t)=>{let a,o,i="https://character-database.becode.xyz/characters".concat("/",e);"DELETE"===t?(a=i,o={method:t}):(a="https://character-database.becode.xyz/characters",o={method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});let n=await fetch(a,o),l=await n;console.log(l),window.location.reload()},t=new window.showdown.Converter;(async()=>{const a=document.querySelector("#moreInfoModal"),o=await(async()=>{const e=await fetch("https://character-database.becode.xyz/characters");return await e.json()})(),i=document.querySelector("#editingModal");for(let e of o){let t=document.querySelector("#tpl"),a=document.importNode(t.content,!0);a.querySelector("h2").textContent=e.name,a.querySelector("p").textContent=e.shortDescription,a.querySelector("img").src=`data:image;base64,${e.image}`,a.querySelector("button").id=e.id,document.querySelector("#cardContainer").appendChild(a)}const n=e=>{let t;for(let a of o)a.id===e&&(t=a);return t};for(let e of document.querySelectorAll(".viewMore"))e.addEventListener("click",(()=>{let t=e.id,o=n(t);a.children[0].id=t,a.querySelector(".titleName").textContent=o.name,a.querySelector("#detailsName").textContent=o.name,a.querySelector("#detailsShortDescription").textContent=o.shortDescription,a.querySelector("#detailsLongDescription").innerHTML=o.description,a.querySelector("#detailsPicture").src=`data:image;base64,${o.image}`}));const l=new EasyMDE({toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"fa fa-bold",title:"Bold"},{name:"italics",action:EasyMDE.toggleItalic,className:"fa fa-italic",title:"Italic"},{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fa fa-header",title:"Heading"},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Quote"},{name:"unordered-list",action:EasyMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Unordered List"},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Ordered List"},{name:"table",action:EasyMDE.drawTable,className:"fa fa-table",title:"Table"},"|",{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",title:"Guide"}],element:document.getElementById("longDescriptionInput")}),r=new EasyMDE({toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"fa fa-bold",title:"Bold"},{name:"italics",action:EasyMDE.toggleItalic,className:"fa fa-italic",title:"Italic"},{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fa fa-header",title:"Heading"},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Quote"},{name:"unordered-list",action:EasyMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Unordered List"},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Ordered List"},{name:"table",action:EasyMDE.drawTable,className:"fa fa-table",title:"Table"},"|",{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",title:"Guide"}],element:document.getElementById("modifyingLongDescription")});document.querySelector("#imageInput").addEventListener("change",(function(e){if(e.target.files){let a=e.target.files[0];var t=new FileReader;t.onload=function(e){var t=document.createElement("img");t.onload=function(e){var a=document.createElement("canvas");a.width=100,a.height=100,a.getContext("2d").drawImage(t,0,0,100,100);var o=a.toDataURL("image/jpg",.7);document.getElementById("preview").src=o},t.src=e.target.result},t.readAsDataURL(a)}})),document.querySelector("#submitNewChar").addEventListener("click",(()=>{let a={};a.name=document.querySelector("#nameInput").value,a.shortDescription=document.querySelector("#shortDescriptionInput").value;let o=l.value(),i=t.makeHtml(o);a.description=i;let n=document.querySelector("#preview").src;a.image=n.slice(22,n.length),e(a,"POST")})),document.querySelector("#deleteCharBtn").addEventListener("click",(()=>{let t=a.children[0].id;e(t,"DELETE")})),document.querySelector("#editBtn").addEventListener("click",(()=>{console.log("sending modified");let e=a.children[0].id,o=n(e);i.querySelector("#modifyingNameTitle").textContent=o.name,i.querySelector("#modifyingName").value=o.name,i.querySelector("#modifyingShortDescription").value=o.shortDescription,r.value(t.makeMarkdown(o.description)),i.querySelector("#modifyingPreview").src=`data:image;base64,${o.image}`}))})();
//# sourceMappingURL=index.ed5c0f8c.js.map
