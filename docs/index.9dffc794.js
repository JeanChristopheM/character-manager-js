const e="https://character-database.becode.xyz/characters",t=async(t,a,o)=>{let n,i,r=e.concat("/",t),l=e.concat("/",o);"DELETE"===a?(n=r,i={method:a}):"PUT"===a?(n=l,i={method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):(n=e,i={method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let c=await fetch(n,i),d=await c;console.log(d),window.location.reload()},a=new window.showdown.Converter;(async()=>{const o=document.getElementById("searchBar"),n=document.querySelector("#moreInfoModal"),i=await(async()=>{const t=await fetch(e);return await t.json()})(),r=document.querySelector("#editingModal");o.addEventListener("keyup",(e=>{const t=e.target.value.toLowerCase();let a=[],o=[];for(let e of i)e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())||e.shortDescription.toLowerCase().includes(t.toLowerCase())?o.push(e):a.push(e);console.log(a);for(let e of a){document.getElementById(e.id).parentNode.parentNode.parentNode.classList.add("hidden")}for(let e of o){document.getElementById(e.id).parentNode.parentNode.parentNode.classList.remove("hidden")}}));for(let e of i){let t=document.querySelector("#tpl"),a=document.importNode(t.content,!0);a.querySelector("h2").textContent=e.name,a.querySelector("p").textContent=e.shortDescription,a.querySelector("img").src=`data:image;base64,${e.image}`,a.querySelector("button").id=e.id,document.querySelector("#cardContainer").appendChild(a)}const l=e=>{let t;for(let a of i)a.id===e&&(t=a);return t};for(let e of document.querySelectorAll(".viewMore"))e.addEventListener("click",(()=>{let t=e.id,a=l(t);n.children[0].id=t,n.querySelector(".titleName").textContent=a.name,n.querySelector("#detailsName").textContent=a.name,n.querySelector("#detailsShortDescription").textContent=a.shortDescription,n.querySelector("#detailsLongDescription").innerHTML=a.description,n.querySelector("#detailsPicture").src=`data:image;base64,${a.image}`}));const c=new EasyMDE({toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"fa fa-bold",title:"Bold"},{name:"italics",action:EasyMDE.toggleItalic,className:"fa fa-italic",title:"Italic"},{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fa fa-header",title:"Heading"},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Quote"},{name:"unordered-list",action:EasyMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Unordered List"},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Ordered List"},{name:"table",action:EasyMDE.drawTable,className:"fa fa-table",title:"Table"},"|",{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",title:"Guide"}],element:document.getElementById("longDescriptionInput")}),d=new EasyMDE({autofocus:!0,autoRefresh:{delay:300},toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"fa fa-bold",title:"Bold"},{name:"italics",action:EasyMDE.toggleItalic,className:"fa fa-italic",title:"Italic"},{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fa fa-header",title:"Heading"},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Quote"},{name:"unordered-list",action:EasyMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Unordered List"},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Ordered List"},{name:"table",action:EasyMDE.drawTable,className:"fa fa-table",title:"Table"},"|",{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",title:"Guide"}],element:document.getElementById("modifyingLongDescription")});document.querySelector("#imageInput").addEventListener("change",(function(e){if(e.target.files){let a=e.target.files[0];var t=new FileReader;t.onload=function(e){var t=document.createElement("img");t.onload=function(e){var a=document.createElement("canvas");a.width=100,a.height=100,a.getContext("2d").drawImage(t,0,0,100,100);var o=a.toDataURL("image/jpg",.7);document.getElementById("preview").src=o},t.src=e.target.result},t.readAsDataURL(a)}})),document.querySelector("#modifyingImage").addEventListener("change",(function(e){if(e.target.files){let a=e.target.files[0];var t=new FileReader;t.onload=function(e){var t=document.createElement("img");t.onload=function(e){var a=document.createElement("canvas");a.width=100,a.height=100,a.getContext("2d").drawImage(t,0,0,100,100);var o=a.toDataURL("image/jpg",.7);document.getElementById("modifyingPreview").src=o},t.src=e.target.result},t.readAsDataURL(a)}})),document.querySelector("#submitNewChar").addEventListener("click",(()=>{let e={};e.name=document.querySelector("#nameInput").value,e.shortDescription=document.querySelector("#shortDescriptionInput").value;let o=c.value(),n=a.makeHtml(o);e.description=n;let i=document.querySelector("#preview").src;e.image=i.slice(22,i.length),console.log(e),t(e,"POST")})),document.querySelector("#deleteCharBtn").addEventListener("click",(()=>{let e=n.children[0].id;t(e,"DELETE")})),document.querySelector("#editBtn").addEventListener("click",(()=>{let e=n.children[0].id,t=l(e);r.querySelector("#modifyingNameTitle").textContent=t.name,r.querySelector("#modifyingName").value=t.name,r.querySelector("#modifyingShortDescription").value=t.shortDescription,d.value(a.makeMarkdown(t.description)),r.querySelector("#modifyingPreview").src=`data:image;base64,${t.image}`})),document.querySelector("#submitModifiedChar").addEventListener("click",(()=>{let e=n.children[0].id,o={};o.name=r.querySelector("#modifyingName").value,o.shortDescription=r.querySelector("#modifyingShortDescription").value;let i=d.value(),l=a.makeHtml(i);o.description=l;let c=r.querySelector("#modifyingPreview").src,s=c.slice(18,c.length);"/"===s.slice(0,1)?o.image=s:o.image=s.slice(4,s.length),t(o,"PUT",e)}))})();
//# sourceMappingURL=index.9dffc794.js.map
