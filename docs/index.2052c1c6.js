const e=async(e,t)=>{let r,n,o="https://character-database.becode.xyz/characters".concat("/",e);"DELETE"===t?(r=o,n={method:t}):(r="https://character-database.becode.xyz/characters",n={method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});let a=await fetch(r,n),c=await a;console.log(c),window.location.reload()},t=new window.showdown.Converter;(async()=>{const r=document.querySelector("#moreInfoModal"),n=await(async()=>{const e=await fetch("https://character-database.becode.xyz/characters");return await e.json()})();for(let e of n){let t=document.querySelector("#tpl"),r=document.importNode(t.content,!0);r.querySelector("h2").textContent=e.name,r.querySelector("p").textContent=e.shortDescription,r.querySelector("img").src=`data:image;base64,${e.image}`,r.querySelector("button").id=e.id,document.querySelector("#cardContainer").appendChild(r)}const o=e=>{let t;for(let r of n)r.id===e&&(t=r);return t};for(let e of document.querySelectorAll(".viewMore"))e.addEventListener("click",(()=>{let t=e.id,n=o(t);r.children[0].id=t,r.querySelector(".titleName").textContent=n.name,r.querySelector("#detailsName").textContent=n.name,r.querySelector("#detailsShortDescription").textContent=n.shortDescription,r.querySelector("#detailsLongDescription").innerHTML=n.description,r.querySelector("#detailsPicture").src=`data:image;base64,${n.image}`}));const a=new EasyMDE({element:document.getElementById("my-text-area")});document.querySelector("#imageInput").addEventListener("change",(function(e){if(e.target.files){let r=e.target.files[0];var t=new FileReader;t.onload=function(e){var t=document.createElement("img");t.onload=function(e){var r=document.createElement("canvas");r.width=100,r.height=100,r.getContext("2d").drawImage(t,0,0,100,100);var n=r.toDataURL("image/jpg",.7);document.getElementById("preview").src=n},t.src=e.target.result},t.readAsDataURL(r)}})),document.querySelector("#submitNewChar").addEventListener("click",(()=>{let r={};r.name=document.querySelector("#nameInput").value,r.shortDescription=document.querySelector("#shortDescriptionInput").value;let n=a.value(),o=t.makeHtml(n);r.description=o;let c=document.querySelector("#preview").src;r.image=c.slice(22,c.length),e(r,"POST")})),document.querySelector("#deleteCharBtn").addEventListener("click",(()=>{let t=r.children[0].id;e(t,"DELETE")}))})();
//# sourceMappingURL=index.2052c1c6.js.map
