{"mappings":"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","sources":["src/script/modules/dbHandling.mjs","src/script/main.js"],"sourcesContent":["const src = \"https://character-database.becode.xyz/characters\";\n\nconst getData = async () => {\n    const data = await fetch(src);\n    return await data.json();\n}\n\nconst manageChar = async (charObj, method) => {\n    let source;\n    let deleteSource = src.concat('/', charObj);\n    let options;\n\n    if (method === \"DELETE\") {\n        source = deleteSource;\n        options = {method: method};\n    } else {\n        source = src;\n        options = {\n            method: method,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(charObj)\n        }\n    }\n    let response = await fetch(source, options);\n    let data = await response;\n    console.log(data);\n    window.location.reload();\n}\n\nexport { getData, manageChar };","import * as dbHandling from './modules/dbHandling.mjs';\nconst showdown = window.showdown;\nconst converter = new showdown.Converter();\nconst app = async () => {\n    const moreDetailsModal = document.querySelector('#moreInfoModal');\n    const database = await dbHandling.getData();\n\n    for(let item of database) {\n        let tpl = document.querySelector('#tpl');\n        let clone = document.importNode(tpl.content, true);\n        clone.querySelector('h2').textContent = item.name;\n        clone.querySelector('p').textContent = item.shortDescription;\n        clone.querySelector('img').src = `data:image;base64,${item.image}`;\n        clone.querySelector('button').id = item.id;\n        document.querySelector('#cardContainer').appendChild(clone);\n    }\n    const getSpecificPost = (id) => {\n        let match;\n        for(let item of database) {\n            if (item.id === id) {\n                match = item;\n            }\n        }\n        return match;\n    }\n    for (let item of document.querySelectorAll('.viewMore')) {\n        item.addEventListener('click', () => {\n            let id = item.id;\n            let dbEntry = getSpecificPost(id);\n            moreDetailsModal.children[0].id = id;\n            moreDetailsModal.querySelector('.titleName').textContent = dbEntry.name;\n            moreDetailsModal.querySelector('#detailsName').textContent = dbEntry.name;\n            moreDetailsModal.querySelector('#detailsShortDescription').textContent = dbEntry.shortDescription;\n            moreDetailsModal.querySelector('#detailsLongDescription').innerHTML = dbEntry.description;\n            moreDetailsModal.querySelector('#detailsPicture').src = `data:image;base64,${dbEntry.image}`;\n        })\n    }\n    const easyMDE = new EasyMDE({element: document.getElementById('my-text-area')});\n\n    let imgInput = document.querySelector('#imageInput');\n    imgInput.addEventListener('change', function (e) {\n        if (e.target.files) {\n            let imageFile = e.target.files[0];\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                var img = document.createElement(\"img\");\n                img.onload = function (event) {\n                    // Dynamically create a canvas element\n                    var canvas = document.createElement(\"canvas\");\n                    canvas.width = 100;\n                    canvas.height = 100;\n                    // var canvas = document.getElementById(\"canvas\");\n                    var ctx = canvas.getContext(\"2d\");\n                    // Actual resizing\n                    ctx.drawImage(img, 0, 0, 100, 100);\n                    // Show resized image in preview element\n                    var dataurl = canvas.toDataURL(\"image/jpg\", 0.7);\n                    document.getElementById(\"preview\").src = dataurl;\n                }\n                img.src = e.target.result;\n            }\n            reader.readAsDataURL(imageFile);\n            \n        }\n    });\n    document.querySelector('#submitNewChar').addEventListener('click', () => {\n        let newChar = {};\n        newChar.name = document.querySelector('#nameInput').value;\n        newChar.shortDescription = document.querySelector('#shortDescriptionInput').value;\n        let mdText = easyMDE.value();\n        let htmlText = converter.makeHtml(mdText)\n        newChar.description = htmlText;\n\n        let newSrc = document.querySelector('#preview').src;\n        newChar.image = newSrc.slice(22, newSrc.length);\n        dbHandling.manageChar(newChar, 'POST');\n    });\n    document.querySelector('#deleteCharBtn').addEventListener('click', () => {\n        let id = moreDetailsModal.children[0].id;\n        dbHandling.manageChar(id, 'DELETE');\n    })\n}    \napp();"],"names":["$62bab0894ad7c0f6$export$35175092c898c4da","async","charObj","method","source","options","deleteSource","concat","headers","body","JSON","stringify","response","fetch","data","console","log","window","location","reload","$bd71841cf23a3750$var$converter","showdown","Converter","moreDetailsModal","document","querySelector","database","json","$62bab0894ad7c0f6$export$7a171f172be0782e","item","tpl","clone","importNode","content","textContent","name","shortDescription","src","image","id","appendChild","getSpecificPost","match","item1","querySelectorAll","addEventListener","dbEntry","children","innerHTML","description","easyMDE","EasyMDE","element","getElementById","e","target","files","imageFile","reader","FileReader","onload","img","createElement","event","canvas","width","height","getContext","drawImage","dataurl","toDataURL","result","readAsDataURL","newChar","value","mdText","htmlText","makeHtml","newSrc","slice","length","$bd71841cf23a3750$var$app"],"version":3,"file":"index.2052c1c6.js.map"}