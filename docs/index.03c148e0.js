const e=async(e,t)=>{let r,o,n="https://character-database.becode.xyz/characters".concat("/",e);"DELETE"===t?(r=n,o={method:t}):(r="https://character-database.becode.xyz/characters",o={method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});let a=await fetch(r,o),c=await a;console.log(c),window.location.reload()};(async()=>{const t=document.querySelector("#moreInfoModal"),r=await(async()=>{const e=await fetch("https://character-database.becode.xyz/characters");return await e.json()})();for(let e of r){let t=document.querySelector("#tpl"),r=document.importNode(t.content,!0);r.querySelector("h2").textContent=e.name,r.querySelector("p").textContent=e.shortDescription,r.querySelector("img").src=`data:image;base64,${e.image}`,r.querySelector("button").id=e.id,document.querySelector("#cardContainer").appendChild(r)}const o=e=>{let t;for(let o of r)o.id===e&&(t=o);return t};for(let e of document.querySelectorAll(".viewMore"))e.addEventListener("click",(()=>{let r=e.id,n=o(r);t.children[0].id=r,t.querySelector(".titleName").textContent=n.name,t.querySelector("#detailsName").textContent=n.name,t.querySelector("#detailsShortDescription").textContent=n.shortDescription,t.querySelector("#detailsLongDescription").innerHTML=n.description,t.querySelector("#detailsPicture").src=`data:image;base64,${n.image}`}));document.querySelector("#imageInput").addEventListener("change",(function(e){if(e.target.files){let r=e.target.files[0];var t=new FileReader;t.onload=function(e){var t=document.createElement("img");t.onload=function(e){var r=document.createElement("canvas");r.width=100,r.height=100,r.getContext("2d").drawImage(t,0,0,100,100);var o=r.toDataURL("image/jpg",.7);document.getElementById("preview").src=o},t.src=e.target.result},t.readAsDataURL(r)}})),document.querySelector("#submitNewChar").addEventListener("click",(()=>{let t={};t.name=document.querySelector("#nameInput").value,t.shortDescription=document.querySelector("#shortDescriptionInput").value,t.description=document.querySelector("#longDescriptionInput").value;let r=document.querySelector("#preview").src;t.image=r.slice(22,r.length),console.log(t),e(t,"POST")})),document.querySelector("#deleteCharBtn").addEventListener("click",(()=>{let r=t.children[0].id;e(r,"DELETE")}))})();
//# sourceMappingURL=index.03c148e0.js.map
